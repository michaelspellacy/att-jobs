// ATT Careers - Global Functions
// Developer: Michael "Spell" Spellacy, Director, User Interface Development, michael.spellacy[at]tmp.com, @spellacy
// Google Analytics (Note: GA should load first in event other scripts fail)
function getSocial(){function t(t,n,r){return'<li id="'+n+'" class="social-feed"><h2>'+e.data().client+" on "+r+"</h2>"+t+"</li>"}var e;$("#social-nav").after("<ul id='social-content' data-client='AT&T'></ul>");var n=setInterval(function(){if($("#social-list").length>0){clearInterval(n);e=$("#social-content");$("#social-list a").click(function(){var n=$(this).attr("id")+"-feed",r,i;if(e.children("#"+n).length<=0){switch($(this).data().feedType){case"facebook":r='<iframe src="http://www.facebook.com/plugins/likebox.php?href=https%3A%2F%2Fwww.facebook.com%2F'+$(this).data().client+'&amp;colorscheme=light&amp;show_faces=false&amp;border_color&amp;stream=true&amp;header=true" scrolling="no" frameborder="0" title="'+$(this).data().title+'"></iframe>';break;case"custom-iframe":r='<iframe src="'+$(this).attr("href")+'" scrolling="'+$(this).data().scroll+'" frameborder="0" title="'+$(this).data().title+'"></iframe>';break;case"youtube":var s=$(this.attributes),o="";for(var u=0;u<s.length;u++)s[u].name.indexOf("plum")>=0&&(o+=s[u].name+'="'+s[u].value+'" ');r='<div id="yt-feed" data-plumtube '+o+' data-plum-new-window="true"><a href="'+$(this).attr("href")+'">Watch my videos on YouTube.</a></div>';i=$('<script id="script-plumtube" src="js/libs/misc/plumtube-mod.min.js"></script>');break;case"linkedin":r='<script src="//platform.linkedin.com/in.js"></script><script type="IN/CompanyProfile" data-id="'+$(this).data().client+'" data-format="inline"></script>';break;case"twitter":r='<a href="http://twitter.com/intent/user?screen_name='+$(this).data().client+'" class="twitter-top" target="_blank">@'+$(this).data().client+'</a><iframe src="http://services.tmpwebeng.com/tmp-share/widget/twitter.aspx?Client='+$(this).data().client+'" frameborder="0" scrolling="auto" title="'+$(this).data().title+'"><a href="'+$(this).attr("href")+'">Follow us on Twitter</a></iframe><a href="'+$(this).attr("href")+'" class="twitter-bottom" target="_blank">Join the Conversation</a>'}e.append($(t(r,n,$(this).html())));$("body").append(i)}$("#social-list a").removeClass("on");$(this).addClass("on");e.children("li").not($("#"+n)).removeClass("on");$("#"+n).addClass("on").children(".social-content-header").focus();return!1});$("body#stay-connected").length?$("#social-list li:first-child a").trigger("click").focus():$("#navigation-primary li#nav-stay-connected > a").on("mouseenter focus",function(){$("#social-list li:first-child a").trigger("click").focus()})}},10)}function getAwards(){if($("body#index").length||$("body#awards").length||$("body#styleguide").length||$("body#template").length||"body#credits".length)if($("#list-container").length){$(".list-items a").on("click",function(){$(".list-content").html('<p class="ajax" tabindex="-1">Loading...</p>');$(".list-content").load($(this).attr("href")+" .list-content > *");$(this).parent().parent().find("li").removeClass("active");$(this).parent().addClass("active");return!1});if($("#dialog").length){$("#dialog").addClass("awards");$("#dialog-title").html("Awards")}$(".list-items #nav-"+$(".list-content").attr("data-award")).addClass("active")}}function isTouchDevice(){return"ontouchstart"in window||window.navigator.msMaxTouchPoints}function newWindows(){isTouchDevice()||$("a.external").on("click",function(){this.target="_blank"})}function accordion(){$(".scroll ol, .scroll ul").length&&$(".scroll h2 a").click(function(){$(this).parent().parent().parent().find(".answer").hide();$(this).parent().parent().find(".answer").show();return!1})}function flex(){$("#list-container").length&&$("#list-container").flexslider({animation:"slide",slideshow:!1,itemWidth:178,maxItems:3,controlNav:!1})}var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-4300144-6"]);_gaq.push(["_trackPageview"]);(function(){var e=document.createElement("script");e.async=!0;e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();$("html.ie8").length||function(e){function c(){n.setAttribute("content",s);o=!0}function h(){n.setAttribute("content",i);o=!1}function p(t){l=t.accelerationIncludingGravity;u=Math.abs(l.x);a=Math.abs(l.y);f=Math.abs(l.z);!e.orientation&&(u>7||(f>6&&a<8||f<8&&a>6)&&u>5)?o&&h():o||c()}var t=e.document;if(!t.querySelector)return;var n=t.querySelector("meta[name=viewport]"),r=n&&n.getAttribute("content"),i=r+",maximum-scale=1",s=r+",maximum-scale=10",o=!0,u,a,f,l;if(!n)return;e.addEventListener("orientationchange",c,!1);e.addEventListener("devicemotion",p,!1)}(this);$(".list-items").length&&$(".list-items #nav-"+$(".list-content").attr("data-award")).addClass("active");(function(e){function s(){i=t>r?!1:!0;if(!i){$("#navigation-primary a").unbind();$("#navigation-primary a").removeClass("active");$("body").removeClass("active-nav");$(".child-nodeset").hide();$("#navigation-primary .parent-node > a").on("click",function(){return!1});$("#navigation-primary li > a").on("mouseenter focus",function(){$(this).parent().parent().find("a").removeClass("active");$(this).parent().parent().find(".child-nodeset").hide();$(this).addClass("active");$(this).parent().find(".child-nodeset").show()});$("#navigation-primary").on("mouseleave",function(){$(this).find("a").removeClass("active");$(this).find(".child-nodeset").hide()});$("#navigation-secondary a").last().on("blur",function(){$("#nav-menu a").removeClass("active");$("#nav-menu .child-nodeset").hide()});$("#nav-menu").append($("#navigation-secondary").addClass("child-nodeset"));if(!$("#talent-network").length&&!$("#content-talent-network").length){$("#nav-talent-network").append('<div id="content-talent-network" class="child-nodeset"><p class="ajax" tabindex="-1">Loading...</p></div>');$("#content-talent-network").load("talent-network.html #content > *",function(){$(".panel ul li a").addClass("external");newWindows()})}if($("body#stay-connected").length)getSocial();else if(!$("#content-stay-connected").length){$("#nav-stay-connected").append('<div id="content-stay-connected" class="child-nodeset"/>');$("#content-stay-connected").load("stay-connected.html #content > *",function(){getSocial()})}$("a.video").on("click",function(){if(!$(".modal-screen").length){$("body").append('<div class="modal-screen"></div>').addClass("blocked").attr("role","application");$("body").append('<div id="dialog" role="dialog" aria-labelledby="dialog-title"><p class="dialog-button video"><a href="#" class="dialog-close" role="button" aria-controls="dialog">Close</a></p><div class="dialog-content"><article id="content"><h1 id="dialog-title">'+$(this).find("h2").text()+'</h1><div class="content"></div></article></div></div>');$(".dialog-content .content").append('<iframe id="college-att-video" src='+$(this).attr("href")+"?autoplay=1"+' allowfullscreen="allowfullscreen" title="Real Associates: Gay Hall "></iframe>');$("#dialog-title").attr("tabindex","-1").focus();window.location.href="#top";$("a.dialog-close").on("click",function(){$("#college-att-video").hide();$(".modal-screen, #dialog").remove();$("body").removeClass("blocked").removeAttr("role");return!1})}return!1});$("a.dialog").on("click",function(){var e=$(this).attr("href");$.dialog(e+" #content");return!1});$("#addthis").length||$("body").append('<script id="addthis" src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-502d65c709bbdafa"></script>');getAwards()}else{$("#navigation-secondary").removeClass("child-nodeset").removeAttr("style").insertAfter($("main"));$("a.external, a.dialog, a.video, .content .addthis_button, .list-items a, #navigation-primary, #navigation-primary a:not('#btn-close')").unbind();$("#script-plumtube, .modal-screen, #dialog, .content .addthis_button, #addthis").remove();$("body").removeClass("blocked").removeAttr("role");$("#navigation-primary li > a").on("click",function(){if($(this).hasClass("active")){$(this).parent().parent().find(".child-nodeset").hide();$(this).removeClass("active")}else{if(!$("#talent-network").length&&$(this).parent("#nav-talent-network").length&&!$("#content-talent-network").length){$(this).parent().append('<div id="content-talent-network" class="child-nodeset"><p class="ajax" tabindex="-1">Loading...</p></div>');$("#content-talent-network").load("talent-network.html #content > *",function(){$(this).append('<a id="btn-close" href="#top" role="button">Close</a>');$("#btn-close").on("click",function(){$(this).parent().hide();$(this).parent().prev().removeClass("active")})})}$(this).parent().parent().find("a").removeClass("active");$(this).parent().parent().find(".child-nodeset").hide();$(this).addClass("active");$(this).parent().find(".child-nodeset").show()}$(this).hasClass("active")&&$("body").hasClass("active-nav")&&$("body").removeClass("active-nav");if($(this).parent().hasClass("parent-node"))return!1});$("#nav-menu a").on("click",function(){$("body").toggleClass("active-nav");$("#navigation-secondary .active").removeClass("active");$("#navigation-secondary .child").hide();return!1});$(".parent > a, .sub-parent > a").on("click",function(){if($(this).hasClass("active")){$(this).parent().children(".child:first").hide();$(this).removeClass("active")}else{$(this).parent().parent().find("a").removeClass("active");$(this).parent().parent().find(".child").hide();$(this).addClass("active");$(this).parent().children(".child:first").show()}return!1})}}var t=document.body.clientWidth,n=document.body.clientHeight,r=700,i=!0;$(document).ready(function(){s()});$(e).resize(function(){t=document.body.clientWidth;n=document.body.clientHeight;s()})})(this);accordion();$(".back-to-top a, a.back-to-top").on("click",function(){$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top},"slow");return!1});$.fn.dialog=function(e){var t=$.extend({title:"h1, h2, h3, h4, h5, h6, legend, label",focus:"a, input, button, select, textarea, [tabindex]",buttons:!1},e);return $(this).each(function(){$("body").is("[role]")||$("body").attr("role","application");$("#dialog").trigger("close");var e=$('<div class="modal-screen"><iframe src="javascript:false;"></iframe></div>');e.css("opacity",.7).height($(window).height()).width($(window).width()).children(0).css("opacity",0);var n=$('<div id="dialog" role="dialog" aria-labelledby="dialog-title"></div>'),r=$('<p class="dialog-button"><a href="#" tabindex="2" class="dialog-close" role="button" aria-controls="dialog">Close</a></p>').appendTo(n),i=$('<div class="dialog-content"></div>').append(this).appendTo(n);n.find(t.title).eq(0).attr("id","dialog-title");if(t.buttons){var s=$('<div class="dialog-footer"></div>');for(var u in t.buttons)$("<button>"+u+"</button>").click(t.buttons[u]).appendTo(s);s.appendTo(n)}n.bind("close",function(){e.remove();n.remove();$("body").removeClass("blocked");$(document).unbind("keydown.dialog focus.dialog")});r.click(function(){n.trigger("close");return!1});$(document).bind("keydown.dialog",function(e){e.which===27&&n.trigger("close")});$(document).bind("focus.dialog",function(e){$(e.target).parents("#dialog").length||n.find("a, input, button, select, textarea, [tabindex]")[0].focus()});$("body").addClass("blocked").append(e).append(n);i.find(t.focus).length?i.find(t.focus)[0].focus():t.buttons?s.find("button")[0].focus():r[0].focus()})};$.dialog=function(e,t){var n=$.extend({loadingText:"Loading...",complete:!1},t);$('<span class="ajax" tabindex="-1">'+n.loadingText+"</span>").dialog({title:"span",focus:"span"});var r=e.split(" "),i=r[0];r.shift();if(r.length)var s=r.join(" ");$.get(i,function(e){var e=$("<div></div>").append(e);s!==" "&&(e=e.find(s));e.dialog(t);n.complete&&n.complete(e)}).done(function(e){accordion();newWindows();flex();getAwards();var t=$(e).filter("title").text(),n=window.location.href;n=n.substring(0,n.lastIndexOf("/")+1);var r=n+i;$(".dialog-content").prepend($(".addthis_button").clone().attr({"addthis:title":t,"addthis:url":r}));addthis.button(".addthis_button")})};$("body").append('<script src="js/libs/misc/flexslider.min.js"></script>');flex();if($(".flexslider").length){$(".module .flexslider a").each(function(){$(this).addClass("dialog")});if(isTouchDevice())var itsElectric=!1;else var itsElectric=!0;$(".module .flexslider").flexslider({animation:"slide",itemWidth:436,maxItems:1,directionNav:!1,slideshow:itsElectric,animationLoop:!0,pauseOnAction:!0,pauseOnHover:!0});$(".view-all").on("click",function(){$(".module .flexslider").flexslider("next");return!1})}isTouchDevice()&&$(".section-content").hide();var addthis_config=addthis_config||{};addthis_config.data_track_clickback=!1;addthis_config.data_track_addressbar=!1;